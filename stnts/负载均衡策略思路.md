#负载均衡策略思路

负载均衡处理的主要是磁盘的负载，应用场景为当新节点上线时，需要从其它节点将数据move过去，大致流程如下

1. 计算全局节点磁盘平均利用率，并筛选出利用率高于平均值一定阈值的节点，作为移动的目标节点dest_node_list
2. 遍历文件系统，以page为单位，获取page的所有副本，通过策略选一个page移动到一个目标节点
3. 在移动过程中如果dest_node_list有节点磁盘利用率高于系统平均值，则删除该节点，若dest_node_list为空，则过程结束
4. 如果文件系统遍历完，则过程结束

对于2提到的策略，大致思路如下  
输入为所有page副本和目标节点列表，选出一个副本和一个目标节点，满足如下条件即可：  

1. 该副本所在节点和该目标节点在同一集群或同一机房
2. 该副本移动之后存储该副本的节点磁盘利用率仍较高（这个要根据经验定）
3. 该副本移动之后存储副本的所有节点扔满足节点分布要求（比如各集群多少个，同机房要求多少个等等）
3. 该目标节点和其它副本所在节点没有在同一网域的（如何衡量同一网域，有待确定）
4. 该目标节点剩余空间足够写该副本

###调用的接口

####文件系统相关接口
**GetSubFileIDList**  
获取目录下的文件列表

**GetSubDirIDList**  
获取目录下的目录列表

**GetPageStoresVersionList**  
获取一个文件的所有page的存储情况

####节点管理相关接口
**FilterNodes**  
筛选目标节点，筛选策略需要自己提供