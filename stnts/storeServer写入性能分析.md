## storeServer写如性能分析
### 基本配置
	num_io_threads=10
	core_num_work_threads=16
	max_num_work_threads=48
	   
	sync_task_thread_num=20
	sync_task_queue_num=100000

其它配置为默认配置

### scp拷贝数据
从一台机器向storeServer所在目标机器用scp进行数据拷贝，分析两台机器之间最大网络传输速度，并以此作为参考，每个scp任务拷贝文件大小为1G，执行命令格式如下

	scp tmp.1G xx@x.x.x.x:/tmp/tmp.1G

通过ifstat统计目标机器网卡流量

	ifstat -i eth0 -n

结果为如下格式

	       eth0       
	 KB/s in  KB/s out
	    1.93      0.00
	    1.30      0.15
	45246.39    161.87
	101691.1    459.49
	71220.27    245.46
	84671.68    309.54
	83963.42    306.62
	86205.83    328.31
	92360.51    361.61
	91405.45    364.87
	88752.93    360.61
	90933.74    358.73
	77889.47    268.22
	81710.56    287.70
	63018.48    232.39
	    1.00      0.12
	    1.01      0.12

分析ifstat结果时只分析目标机器的网卡in流量，并去除小于10000的数据

scp并发数 | 最大速度(KB/s) | 最小速度(KB/s) | 平均速度(KB/s)
--- | --- | --- | 
1 | 101691.100 |  45246.390 |  81466.910
2 | 110258.000 |  17582.540 | 100926.488
3 | 113481.200 |  94878.830 | 109676.494
4 | 115744.800 |  25245.230 | 108886.900
5 | 115768.100 |  17499.310 | 110664.825
6 | 116017.400 |  77068.460 | 111883.877
7 | 116499.800 |  35463.050 | 112722.518
8 | 116742.400 |  77656.430 | 114928.518
9 | 116949.100 |  15393.070 | 112595.908

### BitQiu写文件
BitQiu部署storeServer2台，联通电信各一台，写入一个副本，文件大小为1G，单线程写入，调整客户端数量，观察storeServer网卡流量，统计如下

客户端数量 | 最大速度(KB/s) | 最小速度(KB/s) | 平均速度(KB/s)
--- | --- | --- | ---
1 | 17627.260 |  12081.120 |  16339.413
2 | 29693.030 |  11671.920 |  25872.841
3 | 45445.980 |  10824.210 |  36284.404
4 | 53692.220 |  10249.150 |  41165.475
5 | 64094.200 |  10684.660 |  49949.166
6 | 71985.500 |  11613.280 |  55177.930
7 | 79627.420 |  10417.490 |  56771.435
8 | 80896.480 |  11027.680 |  56736.958
9 | 78421.270 |  10318.210 |  56684.001

disk process thread 10

6 | 71651.530 |  10349.710 |  58417.716


       max |        min |        avg
114798.000 |  48197.260 |  96725.921

       max |        min |        avg
114797.100 |  33586.790 |  93755.568